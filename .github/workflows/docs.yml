name: Commit generated documentation

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Adding executable permissions to manage.py
        run: |
          chmod +x ./tools/manage.py

      - name: Converting IPython Notebooks to Markdowns
        run: |
          ./tools/manage.py --generate-docs

      - uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: |
            Auto-generated documentation update - [docs-release-${{github.event.repository.updated_at}}]

            This commit contains the updated version of the documentation that was
            automatically generated by the generate docs tool on [${{github.event.repository.updated_at}}].
            This includes any changes made to the codebase, new features, and bug
            fixes.

            Signed-off-by: github-actions[bot]

          branch: master
